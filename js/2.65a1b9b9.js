(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{1387:function(e,t,a){},"8b24":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"my-card wrap",attrs:{flat:""}},[a("q-card-section",[a("div",{staticClass:"setClock-header"},[a("div",{staticClass:"text-h4"},[e._v("打卡設定")]),a("q-toggle",{attrs:{label:e.isEdit?"編輯模式":"檢視模式"},model:{value:e.isEdit,callback:function(t){e.isEdit=t},expression:"isEdit"}})],1),a("q-separator",{staticClass:"bg-blue-grey-9 q-mt-sm q-mb-lg",staticStyle:{"padding-top":"2px"}}),a("section",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"上班卡-起",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.goWarkBegin,callback:function(t){e.$set(e.setClockTime,"goWarkBegin",t)},expression:"setClockTime.goWarkBegin"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.goWarkBegin,callback:function(t){e.$set(e.setClockTime,"goWarkBegin",t)},expression:"setClockTime.goWarkBegin"}})],1),a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"上班卡-訖",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.goWarkEnd,callback:function(t){e.$set(e.setClockTime,"goWarkEnd",t)},expression:"setClockTime.goWarkEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.goWarkEnd,callback:function(t){e.$set(e.setClockTime,"goWarkEnd",t)},expression:"setClockTime.goWarkEnd"}})],1),a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"下班卡-起",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.offWarkBegin,callback:function(t){e.$set(e.setClockTime,"offWarkBegin",t)},expression:"setClockTime.offWarkBegin"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.offWarkBegin,callback:function(t){e.$set(e.setClockTime,"offWarkBegin",t)},expression:"setClockTime.offWarkBegin"}})],1),a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"下班卡-訖",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.offWarkEnd,callback:function(t){e.$set(e.setClockTime,"offWarkEnd",t)},expression:"setClockTime.offWarkEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.offWarkEnd,callback:function(t){e.$set(e.setClockTime,"offWarkEnd",t)},expression:"setClockTime.offWarkEnd"}})],1),a("div",{staticClass:"col-12"},[a("q-toggle",{attrs:{disable:!e.isEdit,"checked-icon":"check",color:"red",label:"地圖定位功能","unchecked-icon":"clear"},model:{value:e.setClockTime.locationSwitch,callback:function(t){e.$set(e.setClockTime,"locationSwitch",t)},expression:"setClockTime.locationSwitch"}})],1)]),a("section",{staticClass:"row q-col-gutter-md q-mt-xs"},[a("div",{staticClass:"col-12 text-right"},[a("q-btn",{attrs:{color:"blue-grey-7",label:"更新設定",disable:!e.isEdit},on:{click:e.setTime}})],1)])],1),a("q-card-section",[a("div",{staticClass:"text-h4"},[e._v("打卡概況")]),a("q-separator",{staticClass:"bg-blue-grey-9 q-mt-sm q-mb-lg",staticStyle:{"padding-top":"2px"}}),a("q-table",{attrs:{bordered:"",flat:"",data:e.clockRecordList,columns:e.columns,"row-key":"index",pagination:e.pagination,filter:e.filter,loading:e.loading},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-clockInPosition",fn:function(t){return[a("q-td",{attrs:{align:"center"}},[t.value?a("q-btn",{attrs:{type:"a",href:"https://www.google.com/maps?q="+t.value,target:"_blank",flat:"",icon:"place"}}):e._e()],1)]}}])})],1),a("section",[a("mapModel",{attrs:{prompt:e.dSwitch,data:e.coordinate},on:{close:e.closeModel}})],1)],1)},i=[],s=a("c973"),n=a.n(s),c=a("9523"),l=a.n(c),r=a("ded3"),d=a.n(r),p=(a("96cf"),a("99af"),a("2f62")),u=[{name:"sn",label:"打卡序",field:"sn",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"staffName",label:"員工姓名",field:"staffName",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"staffNum",label:"員工編號",field:"staffNum",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"clockInType",label:"打卡類別",field:"clockInType",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"clockInTime",label:"打卡時間",field:"clockInTime",align:"center",headerClasses:"bg-blue-grey-9 text-white",sortable:!0},{name:"clockInPosition",label:"打卡定位",field:"clockInPosition",align:"center",headerClasses:"bg-blue-grey-9 text-white"}],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-dialog",{attrs:{persistent:""},model:{value:e.prompt,callback:function(t){e.prompt=t},expression:"prompt"}},[a("q-card",{staticClass:"bg-grey-3",staticStyle:{width:"450px"}},[a("q-toolbar",{staticClass:"bg-blue-grey-9 text-white"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[e._v("打卡定位點")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:e.close}})],1),a("q-card-section")],1)],1)},f=[],k={name:"mapModel",data:function(){return{}},methods:{close:function(){this.addData={},this.$emit("close")}},props:["prompt","data"]},g=k,h=a("2877"),b=a("24e8"),C=a("f09f"),T=a("65c6"),w=a("6ac5"),q=a("9c40"),y=a("a370"),x=a("eebe"),v=a.n(x),W=Object(h["a"])(g,m,f,!1,null,null,null),E=W.exports;v()(W,"components",{QDialog:b["a"],QCard:C["a"],QToolbar:T["a"],QToolbarTitle:w["a"],QBtn:q["a"],QCardSection:y["a"]});var S={name:"Index",components:{mapModel:E},data:function(){return{loading:!0,params:{userName:null,password:null},setClockTime:{goWarkBegin:null,goWarkEnd:null,offWarkBegin:null,offWarkEnd:null,locationSwitch:!1},isEdit:!1,pagination:{rowsPerPage:10},filter:"",dSwitch:!1,coordinate:null}},computed:d()(d()({},Object(p["d"])("authority/account",["clockSetUp","clockTime","goWarkBegin","goWarkEnd","offWarkBegin","offWarkEnd","clockUpdate","clockRecordList","userData","locationSwitch"])),{},{columns:function(){return _.concat(u)},checkSetTime:function(){return!!(this.setClockTime.goWarkBegin&&this.setClockTime.goWarkEnd&&this.setClockTime.offWarkBegin&&this.setClockTime.offWarkEnd)}}),methods:d()(d()({},Object(p["b"])("authority/account",["createUser","fetchClockSetUp","fetchClockRecord"])),{},{setTime:function(){var e,t=this;if(this.checkSetTime){var a=(e={},l()(e,"".concat(this.goWarkBegin),this.setClockTime.goWarkBegin),l()(e,"".concat(this.goWarkEnd),this.setClockTime.goWarkEnd),l()(e,"".concat(this.offWarkBegin),this.setClockTime.offWarkBegin),l()(e,"".concat(this.offWarkEnd),this.setClockTime.offWarkEnd),l()(e,"".concat(this.locationSwitch),this.setClockTime.locationSwitch),e),o="https://docs.google.com/forms/u/0/d/e/".concat(this.clockUpdate,"/formResponse");$.ajax({type:"POST",url:o,data:a,contentType:"application/json",dataType:"jsonp"}).fail((function(e){200==e.status?(t.isEdit=!1,t.$q.loading.hide(),t.$swal({title:"設定成功",icon:"success",timer:1e3,showConfirmButton:!1})):(t.$q.loading.hide(),t.$swal({title:"設定失敗",icon:"error"}))}))}else this.$swal({icon:"error",title:"設定錯誤",text:"上下班起訖時間未填寫完整"})},openMapModel:function(e){this.coordinate=e,this.dSwitch=!0},closeModel:function(){this.coordinate=null,this.dSwitch=!1},setTheClockInData:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchClockSetUp();case 2:return t.next=4,e.fetchClockRecord();case 4:e.setClockTime=_.cloneDeep(e.clockTime),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()}}),mounted:function(){this.setTheClockInData()}},B=S,Q=(a("c2fa"),a("9564")),I=a("eb85"),j=a("27f9"),N=a("0016"),P=a("7cbe"),M=a("ca78"),R=a("eaac"),D=a("74f7"),U=a("db86"),O=a("7f67"),L=Object(h["a"])(B,o,i,!1,null,"6d587da0",null);t["default"]=L.exports;v()(L,"components",{QCard:C["a"],QCardSection:y["a"],QToggle:Q["a"],QSeparator:I["a"],QInput:j["a"],QIcon:N["a"],QPopupProxy:P["a"],QTime:M["a"],QBtn:q["a"],QTable:R["a"],QInnerLoading:D["a"],QTd:U["a"]}),v()(L,"directives",{ClosePopup:O["a"]})},c2fa:function(e,t,a){"use strict";a("1387")}}]);