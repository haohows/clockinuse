(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"5f37":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n("99af"),n("a15b"),n("d81d"),n("4de4");var r=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,o=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,c=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,a=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,s=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,i=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,u=/^\+?[1-9][0-9]*$|^(0|[1-9][0-9]*)$/,l=/^\+?[1-9][0-9]*$/,d={date:function(e){return/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)||"請輸入正確的日期格式"},time:function(e){return/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e)||"請輸入正確的時間格式"},hexaColor:function(e){return o.test(e)},hexOrHexaColor:function(e){return c.test(e)},rgbColor:function(e){return a.test(e)},rgbaColor:function(e){return s.test(e)},rgbOrRgbaColor:function(e){return a.test(e)||s.test(e)},hexOrRgbColor:function(e){return r.test(e)||a.test(e)},hexaOrRgbaColor:function(e){return o.test(e)||s.test(e)},anyColor:function(e){return c.test(e)||a.test(e)||s.test(e)},email:function(e){return i.test(e)||"請輸入正確的信箱格式"},required:function(e){return!!e||"該欄位為必填項目"},maxSize:function(e,t,n){return function(n){return!n||(n.length<=t||"".concat(e||"該欄位","不得超過").concat(t,"字"))}},minSize:function(e,t,n){return function(n){return!n||(n.length>=t||"".concat(e||"該欄位","必須超過").concat(t,"字"))}},rangeSize:function(e,t,n,r){return function(r){return!r||(r.length>=t&&r.length<=n||"".concat(e||"該欄位","必須超過").concat(t,"字且不得超過").concat(n,"字"))}},rangeNumber:function(e,t,n,r){return function(r){return!r||(r>=t&&r<=n||"".concat(e||"該欄位","必須介於").concat(t,"~").concat(n,"之間"))}},mustSize:function(e,t,n){return function(n){return!n||(n.length==t||"".concat(e||"該欄位","長度必須為").concat(t,"字"))}},naturalNumberIZ:function(e){return!e||(u.test(e)||"該欄位需為正整數或零")},naturalNumber:function(e){return!e||(l.test(e)||"該欄位需為正整數")},notZero:function(e){return!e||(0!=e||"該欄位不得為零")},maxNumber:function(e,t){return function(t){return!t||(t<=e||"該欄位不得超過".concat(e))}},minNumber:function(e,t){return function(t){return!t||(t>=e||"該欄位不得低於".concat(e))}},responseError:function(e){var t=_.join(_.map(_.filter(this.errorMessage,(function(t,n,r){return _.upperCase(t.Key)==_.upperCase(e)&&t})),(function(e,t,n){return e.Message})),"、");return t},responseErrorHas:function(e){var t=_.some(this.errorMessage,(function(t,n,r){return _.upperCase(t.Key)==_.upperCase(e)}));return t},blurError:function(e){!this.responseErrorHas(e)||this.removeError(e)},removeError:function(e){this.errorMessage=_.remove(this.errorMessage,(function(t,n,r){return _.upperCase(t.Key)!=_.upperCase(e)}))}}},"8c6a":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-layout",[n("q-page-container",[n("q-page",{staticClass:"row justify-center items-center"},[Object.keys(e.clockData).length?n("q-card",{staticClass:"shadow-8",staticStyle:{width:"350px"},attrs:{square:""}},[n("q-card-section",{staticClass:"bg-blue-grey-9"},[n("h4",{staticClass:"text-white text-center q-my-sm"},[e._v("遠端打卡系統")]),n("h5",{staticClass:"text-white text-center q-my-sm"},[e._v("\n            "+e._s(e.clockData.companyName)+"\n          ")]),n("p",{staticClass:"text-white text-center q-my-sm"},[e._v(e._s(e.nowTime))])]),n("q-form",{on:{submit:e.onSubmit,keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}},[n("q-card-section",{staticClass:"q-py-none"},[n("div",{staticClass:"q-px-md q-pt-lg q-pb-lg"},[n("q-select",{attrs:{label:"打卡類別",options:e.options.clockInType,type:"text",filled:"","option-label":"text","option-value":"value","emit-value":"","map-options":"",rules:[e.rules.required],"hide-bottom-space":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"receipt_long"}})]},proxy:!0}]),model:{value:e.addClockRecord.clockInType,callback:function(t){e.$set(e.addClockRecord,"clockInType",t)},expression:"addClockRecord.clockInType"}}),n("q-input",{staticClass:"q-my-md",attrs:{filled:"",type:"text",label:"輸入您的姓名",rules:[e.rules.required],"hide-bottom-space":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:e.addClockRecord.staffName,callback:function(t){e.$set(e.addClockRecord,"staffName","string"===typeof t?t.trim():t)},expression:"addClockRecord.staffName"}}),n("q-input",{staticClass:"q-my-md",attrs:{filled:"",type:"text",label:"輸入您的員編",rules:[e.rules.required],"hide-bottom-space":""},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("q-icon",{attrs:{name:"pin"}})]},proxy:!0}]),model:{value:e.addClockRecord.staffNum,callback:function(t){e.$set(e.addClockRecord,"staffNum","string"===typeof t?t.trim():t)},expression:"addClockRecord.staffNum"}}),n("q-btn",{staticClass:"full-width q-mt-lg",attrs:{push:"",color:"blue-grey-9",type:"submit"}},[e._v("\n                點擊打卡\n              ")])],1)])],1)],1):n("q-card",{staticClass:"shadow-8",staticStyle:{width:"350px"},attrs:{square:""}},[n("q-card-section",{staticClass:"bg-blue-grey-9"},[n("h4",{staticClass:"text-white text-center q-my-sm"},[e._v("遠端打卡系統")])]),n("q-card-section",[n("div",{staticClass:"q-px-md q-py-lg row q-col-gutter-sm"},[n("div",{staticClass:"col-9 column"},[n("q-input",{attrs:{outlined:"",dense:"",label:"請輸入識別碼",maxlength:"8"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getClockSet(t)}},model:{value:e.clockPassword,callback:function(t){e.clockPassword=t},expression:"clockPassword"}})],1),n("div",{staticClass:"col-3"},[n("q-btn",{staticClass:"text-white full-width",attrs:{push:"",color:"blue-grey-9"},on:{click:e.getClockSet}},[e._v("\n                驗證\n              ")])],1)])])],1)],1)],1)],1)},o=[],c=n("9523"),a=n.n(c),s=n("c973"),i=n.n(s),u=n("ded3"),l=n.n(u),d=(n("96cf"),n("ac1f"),n("5319"),n("a9e3"),n("99af"),n("4de4"),n("2f62")),f=n("5f37"),p={name:"clockIn",data:function(){return{showAddClockRecord:!1,clockPassword:null,clockData:{},options:{clockInType:[{text:"上班卡",value:1},{text:"下班卡",value:2}]},addClockRecord:{},setClockTime:[],rules:f["a"],nowTime:null}},computed:l()(l()({},Object(d["d"])("authority/account",["userData","clockTime"])),{},{goWarkBegin:function(){var e=this.clockTime.goWarkBegin.replace(":","");return Number(e)},goWarkEnd:function(){var e=this.clockTime.goWarkEnd.replace(":","");return Number(e)},offWarkBegin:function(){var e=this.clockTime.offWarkBegin.replace(":","");return Number(e)},offWarkEnd:function(){var e=this.clockTime.offWarkEnd.replace(":","");return Number(e)}}),methods:l()(l()({},Object(d["b"])("authority/account",["fetchUser","fetchClockSetUp"])),{},{checkTimeConClockIn:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=Number("".concat(t).concat(n));return 1==this.addClockRecord.clockInType?r>=this.goWarkBegin&&r<this.goWarkEnd:r>=this.offWarkBegin&&r<this.offWarkEnd},onSubmit:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.checkTimeConClockIn()){t.next=3;break}return e.$swal({icon:"error",title:"打卡失敗",text:"目前不在公司設定的打卡區間內"}),t.abrupt("return");case 3:n={},a()(n,"".concat(e.clockData.clockInType),1==e.addClockRecord.clockInType?"上班卡":"下班卡"),a()(n,"".concat(e.clockData.staffName),e.addClockRecord.staffName),a()(n,"".concat(e.clockData.staffNum),e.addClockRecord.staffNum),r=n,e.$q.loading.show(),o="https://docs.google.com/forms/u/0/d/e/".concat(e.clockData.createClockRecord,"/formResponse"),$.ajax({type:"POST",url:o,data:r,contentType:"application/json",dataType:"jsonp"}).fail((function(t){200==t.status?(e.$q.loading.hide(),e.clockData={},e.clockPassword=null,e.$swal({title:"打卡成功",icon:"success",timer:1e3,showConfirmButton:!1})):(e.$q.loading.hide(),e.$swal({title:"打卡失敗",icon:"error"}))}));case 7:case"end":return t.stop()}}),t)})))()},getClockSet:function(){var e=this;return i()(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.clockPassword){t.next=3;break}return e.$swal({icon:"warning",title:"未輸入識別碼"}),t.abrupt("return");case 3:return e.$q.loading.show({message:"驗證中..."}),t.next=6,e.fetchUser();case 6:if(n=e.userData.filter((function(t){return t.clockPassword==e.clockPassword})),n.length&&n[0].conUse){t.next=11;break}return e.$q.loading.hide(),e.$swal({icon:"error",title:"驗證失敗",text:"公司未註冊或識別碼錯誤"}),t.abrupt("return");case 11:return t.next=13,e.fetchClockSetUp(n[0].clockSetUp);case 13:e.setClockTime=_.cloneDeep(e.clockTime),e.$q.loading.hide(),e.showAddClockRecord=!0,e.$swal({icon:"success",timer:1e3,showConfirmButton:!1,title:"驗證成功"}).then((function(){e.clockData=n[0]}));case 17:case"end":return t.stop()}}),t)})))()},showTime:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o="".concat(t>12?"下午":"上午");this.nowTime="".concat(o," ").concat(t," 時 ").concat(n," 分 ").concat(r," 秒")}}),mounted:function(){var e=this;setInterval((function(){e.showTime()}),1e3)}},m=p,k=n("2877"),h=n("4d5a"),g=n("09e3"),C=n("9989"),b=n("f09f"),y=n("a370"),w=n("27f9"),x=n("9c40"),q=n("0378"),v=n("ddd8"),T=n("0016"),R=n("eebe"),N=n.n(R),S=Object(k["a"])(m,r,o,!1,null,null,null);t["default"]=S.exports;N()(S,"components",{QLayout:h["a"],QPageContainer:g["a"],QPage:C["a"],QCard:b["a"],QCardSection:y["a"],QInput:w["a"],QBtn:x["a"],QForm:q["a"],QSelect:v["a"],QIcon:T["a"]})}}]);