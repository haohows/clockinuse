(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"5f37":function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));a("99af"),a("a15b"),a("d81d"),a("4de4");var n=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,r=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,o=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,s=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,c=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,i=/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/,u=/^\+?[1-9][0-9]*$|^(0|[1-9][0-9]*)$/,l=/^\+?[1-9][0-9]*$/,d={date:function(t){return/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)||"請輸入正確的日期格式"},time:function(t){return/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t)||"請輸入正確的時間格式"},hexaColor:function(t){return r.test(t)},hexOrHexaColor:function(t){return o.test(t)},rgbColor:function(t){return s.test(t)},rgbaColor:function(t){return c.test(t)},rgbOrRgbaColor:function(t){return s.test(t)||c.test(t)},hexOrRgbColor:function(t){return n.test(t)||s.test(t)},hexaOrRgbaColor:function(t){return r.test(t)||c.test(t)},anyColor:function(t){return o.test(t)||s.test(t)||c.test(t)},email:function(t){return i.test(t)||"請輸入正確的信箱格式"},required:function(t){return!!t||"該欄位為必填項目"},maxSize:function(t,e,a){return function(a){return!a||(a.length<=e||"".concat(t||"該欄位","不得超過").concat(e,"字"))}},minSize:function(t,e,a){return function(a){return!a||(a.length>=e||"".concat(t||"該欄位","必須超過").concat(e,"字"))}},rangeSize:function(t,e,a,n){return function(n){return!n||(n.length>=e&&n.length<=a||"".concat(t||"該欄位","必須超過").concat(e,"字且不得超過").concat(a,"字"))}},rangeNumber:function(t,e,a,n){return function(n){return!n||(n>=e&&n<=a||"".concat(t||"該欄位","必須介於").concat(e,"~").concat(a,"之間"))}},mustSize:function(t,e,a){return function(a){return!a||(a.length==e||"".concat(t||"該欄位","長度必須為").concat(e,"字"))}},naturalNumberIZ:function(t){return!t||(u.test(t)||"該欄位需為正整數或零")},naturalNumber:function(t){return!t||(l.test(t)||"該欄位需為正整數")},notZero:function(t){return!t||(0!=t||"該欄位不得為零")},maxNumber:function(t,e){return function(e){return!e||(e<=t||"該欄位不得超過".concat(t))}},minNumber:function(t,e){return function(e){return!e||(e>=t||"該欄位不得低於".concat(t))}},responseError:function(t){var e=_.join(_.map(_.filter(this.errorMessage,(function(e,a,n){return _.upperCase(e.Key)==_.upperCase(t)&&e})),(function(t,e,a){return t.Message})),"、");return e},responseErrorHas:function(t){var e=_.some(this.errorMessage,(function(e,a,n){return _.upperCase(e.Key)==_.upperCase(t)}));return e},blurError:function(t){!this.responseErrorHas(t)||this.removeError(t)},removeError:function(t){this.errorMessage=_.remove(this.errorMessage,(function(e,a,n){return _.upperCase(e.Key)!=_.upperCase(t)}))}}},c6f7:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",[a("q-page-container",[a("q-page",{staticClass:"row justify-center items-center"},[a("q-card",{staticClass:"shadow-8",staticStyle:{width:"350px"},attrs:{square:""}},[a("q-card-section",{staticClass:"bg-blue-grey-9"},[a("h4",{staticClass:"text-white text-center q-my-sm"},[t._v("遠端打卡系統")]),a("h5",{staticClass:"text-white text-center q-my-sm"},[t._v("管理者登入介面")])]),a("q-card-section",{staticClass:"q-py-none"},[a("div",{staticClass:"q-px-md q-pt-lg q-pb-lg"},[a("q-input",{staticClass:"q-my-md",attrs:{filled:"",type:"text",label:"使用者信箱"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"mail"}})]},proxy:!0}]),model:{value:t.email,callback:function(e){t.email="string"===typeof e?e.trim():e},expression:"email"}}),a("q-input",{staticClass:"q-my-md",attrs:{filled:"",type:"password",label:"使用者密碼"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"lock"}})]},proxy:!0}]),model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("div",{staticClass:"q-pt-lg row q-col-gutter-xs"},[a("div",{staticClass:"col-9"},[a("q-btn",{staticClass:"text-white full-width",attrs:{color:"blue-grey-9"},on:{click:t.handleSubmit}},[t._v("\n                  登入\n                ")])],1),a("div",{staticClass:"col-3"},[a("q-btn",{staticClass:"text-white full-width",attrs:{color:"blue-grey-9"},on:{click:t.openRegModel}},[t._v("\n                  註冊\n                ")])],1)])],1)])],1)],1)],1),a("section",[a("regModel",{attrs:{prompt:t.dSwitch},on:{close:t.closeModel}})],1)],1)},r=[],o=a("c973"),s=a.n(o),c=a("ded3"),i=a.n(c),u=(a("96cf"),a("4de4"),a("2f62")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[a("q-card",{staticClass:"bg-grey-3",staticStyle:{width:"450px"}},[a("q-toolbar",{staticClass:"bg-blue-grey-9 text-white"},[a("q-toolbar-title",[a("span",{staticClass:"text-weight-bold"},[t._v("新增註冊")])]),a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"close"},on:{click:t.close}})],1),a("q-form",{on:{submit:t.onSubmit}},[a("q-card-section",{staticClass:"q-px-xl q-col-gutter-md row q-mb-md q-mt-sm"},[a("q-input",{staticClass:"col-12",attrs:{"bg-color":"white",outlined:"",label:"使用者姓名",dense:"",rules:[t.rules.required],"hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"person"}})]},proxy:!0}]),model:{value:t.addData.userName,callback:function(e){t.$set(t.addData,"userName",e)},expression:"addData.userName"}}),a("q-input",{staticClass:"col-12",attrs:{"bg-color":"white",outlined:"",label:"公司名稱",dense:"",rules:[t.rules.required],"hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"apartment"}})]},proxy:!0}]),model:{value:t.addData.companyName,callback:function(e){t.$set(t.addData,"companyName",e)},expression:"addData.companyName"}}),a("q-input",{staticClass:"col-12",attrs:{"bg-color":"white",outlined:"",label:"信箱(預設為帳號)",dense:"",rules:[t.rules.required],"hide-bottom-space":""},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"mail"}})]},proxy:!0}]),model:{value:t.addData.email,callback:function(e){t.$set(t.addData,"email",e)},expression:"addData.email"}}),a("q-input",{staticClass:"col-12",attrs:{"bg-color":"white",outlined:"",label:"登入密碼",dense:"",rules:[t.rules.required],"hide-bottom-space":"",maxlength:"8"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"lock"}})]},proxy:!0}]),model:{value:t.addData.password,callback:function(e){t.$set(t.addData,"password",e)},expression:"addData.password"}}),a("q-input",{staticClass:"col-12",attrs:{"bg-color":"white",outlined:"",label:"打卡識別碼",dense:"",rules:[t.rules.required],"hide-bottom-space":"",maxlength:"8"},scopedSlots:t._u([{key:"prepend",fn:function(){return[a("q-icon",{attrs:{name:"lock_clock"}})]},proxy:!0}]),model:{value:t.addData.clockPassword,callback:function(e){t.$set(t.addData,"clockPassword",e)},expression:"addData.clockPassword"}})],1),a("q-separator"),a("q-card-actions",{staticClass:"q-pa-md",attrs:{align:"right"}},[a("q-btn",{attrs:{color:"red-9",label:"取消",size:"md",icon:"close"},on:{click:t.close}}),a("q-btn",{attrs:{color:"blue-grey-8",label:"確定",type:"submit",size:"md",icon:"check"}})],1)],1)],1)],1)},d=[],p=(a("159b"),a("caad"),a("2532"),a("5f37")),m={name:"registered",data:function(){return{rules:p["a"],addData:{}}},computed:i()({},Object(u["d"])("authority/account",["userData"])),methods:i()(i()({},Object(u["b"])("authority/account",["fetchUser"])),{},{onSubmit:function(){var t=this;return s()(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$q.loading.show(),e.next=3,t.fetchUser();case 3:if(a=[],t.userData.forEach((function(t){a.push(t.email)})),!a.includes(t.addData.email)){e.next=9;break}return t.$q.loading.hide(),t.$swal({title:"註冊失敗",text:"信箱【".concat(t.addData.email,"】已被註冊"),icon:"error"}),e.abrupt("return");case 9:if(n=[],t.userData.forEach((function(t){n.push(t.clockPassword)})),!n.includes(t.addData.clockPassword)){e.next=15;break}return t.$q.loading.hide(),t.$swal({title:"註冊失敗",text:"識別碼【".concat(t.addData.clockPassword,"】已被使用"),icon:"error"}),e.abrupt("return");case 15:t.createUser();case 16:case"end":return e.stop()}}),e)})))()},createUser:function(){var t=this,e={"entry.1239497659":this.addData.userName,"entry.552045114":this.addData.companyName,"entry.817521518":this.addData.email,"entry.2049638628":this.addData.password,"entry.1477039064":this.addData.clockPassword},a="https://docs.google.com/forms/u/0/d/e/1FAIpQLSe-Pfzj5acjeQEA3SvU47R5X9XfWUFromzXnSMo3pDwUQwXwA/formResponse";$.ajax({type:"POST",url:a,data:e,contentType:"application/json",dataType:"jsonp"}).fail((function(e){200==e.status?(t.close(),t.$q.loading.hide(),t.$swal({title:"註冊成功",icon:"success",timer:1e3,showConfirmButton:!1})):(t.$q.loading.hide(),t.$swal({title:"註冊失敗",icon:"error"}))}))},close:function(){this.addData={},this.$emit("close")}}),props:["prompt"]},f=m,h=a("2877"),b=a("24e8"),g=a("f09f"),w=a("65c6"),y=a("6ac5"),q=a("9c40"),x=a("0378"),k=a("a370"),C=a("27f9"),v=a("0016"),D=a("eb85"),S=a("4b7e"),_=a("eebe"),Q=a.n(_),A=Object(h["a"])(f,l,d,!1,null,null,null),j=A.exports;Q()(A,"components",{QDialog:b["a"],QCard:g["a"],QToolbar:w["a"],QToolbarTitle:y["a"],QBtn:q["a"],QForm:x["a"],QCardSection:k["a"],QInput:C["a"],QIcon:v["a"],QSeparator:D["a"],QCardActions:S["a"]});var O={name:"Login",data:function(){return{email:null,password:null,dSwitch:!1}},components:{regModel:j},computed:i()({},Object(u["d"])("authority/account",["userData"])),methods:i()(i()(i()({},Object(u["b"])("authority/account",["fetchUser"])),Object(u["c"])("authority/account",["setUserAdminData"])),{},{handleSubmit:function(){var t=this;return s()(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.email&&t.password){e.next=3;break}return t.$swal({icon:"warning",title:"帳號或密碼未填寫"}),e.abrupt("return");case 3:return t.$q.loading.show(),e.next=6,t.fetchUser();case 6:a=t.userData.filter((function(e){return e.email==t.email&&e.password==t.password})),console.log(a,"check"),a.length?(t.setUserAdminData(a[0]),t.$q.loading.hide(),t.$router.push({name:"index"}),t.$swal({icon:"success",timer:1e3,showConfirmButton:!1,title:"登入成功"})):(t.$q.loading.hide(),t.$swal({icon:"error",title:"登入失敗",text:"請確定帳號、密碼是否正確"}));case 9:case"end":return e.stop()}}),e)})))()},openRegModel:function(){this.dSwitch=!0},closeModel:function(){this.dSwitch=!1}})},E=O,N=a("4d5a"),M=a("09e3"),z=a("9989"),F=Object(h["a"])(E,n,r,!1,null,null,null);e["default"]=F.exports;Q()(F,"components",{QLayout:N["a"],QPageContainer:M["a"],QPage:z["a"],QCard:g["a"],QCardSection:k["a"],QInput:C["a"],QIcon:v["a"],QBtn:q["a"]})}}]);