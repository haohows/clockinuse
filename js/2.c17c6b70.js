(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{7105:function(e,t,a){},7618:function(e,t,a){"use strict";a("7105")},"8b24":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-card",{staticClass:"my-card wrap",attrs:{flat:""}},[a("q-card-section",[a("div",{staticClass:"setClock-header"},[a("div",{staticClass:"text-h4"},[e._v("打卡設定")]),a("q-toggle",{attrs:{label:e.isEdit?"編輯模式":"檢視模式"},model:{value:e.isEdit,callback:function(t){e.isEdit=t},expression:"isEdit"}})],1),a("q-separator",{staticClass:"bg-blue-grey-9 q-mt-sm q-mb-lg",staticStyle:{"padding-top":"2px"}}),a("section",{staticClass:"row q-col-gutter-md"},[a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"上班卡-起",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.goWarkBegin,callback:function(t){e.$set(e.setClockTime,"goWarkBegin",t)},expression:"setClockTime.goWarkBegin"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.goWarkBegin,callback:function(t){e.$set(e.setClockTime,"goWarkBegin",t)},expression:"setClockTime.goWarkBegin"}})],1),a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"上班卡-訖",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.goWarkEnd,callback:function(t){e.$set(e.setClockTime,"goWarkEnd",t)},expression:"setClockTime.goWarkEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.goWarkEnd,callback:function(t){e.$set(e.setClockTime,"goWarkEnd",t)},expression:"setClockTime.goWarkEnd"}})],1),a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"下班卡-起",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.offWarkBegin,callback:function(t){e.$set(e.setClockTime,"offWarkBegin",t)},expression:"setClockTime.offWarkBegin"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.offWarkBegin,callback:function(t){e.$set(e.setClockTime,"offWarkBegin",t)},expression:"setClockTime.offWarkBegin"}})],1),a("div",{staticClass:"col-3"},[a("q-input",{attrs:{outlined:"",mask:"time",label:"下班卡-訖",disable:!e.isEdit},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{format24h:""},model:{value:e.setClockTime.offWarkEnd,callback:function(t){e.$set(e.setClockTime,"offWarkEnd",t)},expression:"setClockTime.offWarkEnd"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"full-width q-mt-sm",attrs:{label:"確定",color:"primary"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.setClockTime.offWarkEnd,callback:function(t){e.$set(e.setClockTime,"offWarkEnd",t)},expression:"setClockTime.offWarkEnd"}})],1)]),a("section",{staticClass:"row q-col-gutter-md q-mt-xs"},[a("div",{staticClass:"col-12 text-right"},[a("q-btn",{attrs:{color:"blue-grey-7",label:"設定時間",disable:!e.isEdit},on:{click:e.setTime}})],1)])],1),a("q-card-section",[a("div",{staticClass:"text-h4"},[e._v("打卡概況")]),a("q-separator",{staticClass:"bg-blue-grey-9 q-mt-sm q-mb-lg",staticStyle:{"padding-top":"2px"}}),a("q-table",{attrs:{bordered:"",flat:"",data:e.clockRecordList,columns:e.columns,"row-key":"index",pagination:e.pagination,filter:e.filter,loading:e.loading},on:{"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"loading",fn:function(){return[a("q-inner-loading",{attrs:{showing:"",color:"primary"}})]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{attrs:{outlined:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1)],1)},i=[],o=a("c973"),n=a.n(o),c=a("9523"),l=a.n(c),r=a("ded3"),d=a.n(r),u=(a("96cf"),a("99af"),a("2f62")),m=[{name:"sn",label:"打卡序",field:"sn",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"staffName",label:"員工姓名",field:"staffName",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"staffNum",label:"員工編號",field:"staffNum",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"clockInType",label:"打卡類別",field:"clockInType",align:"center",headerClasses:"bg-blue-grey-9 text-white"},{name:"clockInTime",label:"打卡時間",field:"clockInTime",align:"center",headerClasses:"bg-blue-grey-9 text-white",sortable:!0}],p={name:"Index",data:function(){return{loading:!0,params:{userName:null,password:null},setClockTime:{goWarkBegin:null,goWarkEnd:null,offWarkBegin:null,offWarkEnd:null},isEdit:!1,pagination:{rowsPerPage:10},filter:""}},computed:d()(d()({},Object(u["d"])("authority/account",["clockSetUp","clockTime","goWarkBegin","goWarkEnd","offWarkBegin","offWarkEnd","clockUpdate","clockRecordList","userData"])),{},{columns:function(){return _.concat(m)},checkSetTime:function(){return!!(this.setClockTime.goWarkBegin&&this.setClockTime.goWarkEnd&&this.setClockTime.offWarkBegin&&this.setClockTime.offWarkEnd)}}),methods:d()(d()({},Object(u["b"])("authority/account",["createUser","fetchClockSetUp","fetchClockRecord"])),{},{setTime:function(){var e,t=this;if(this.checkSetTime){var a=(e={},l()(e,"".concat(this.goWarkBegin),this.setClockTime.goWarkBegin),l()(e,"".concat(this.goWarkEnd),this.setClockTime.goWarkEnd),l()(e,"".concat(this.offWarkBegin),this.setClockTime.offWarkBegin),l()(e,"".concat(this.offWarkEnd),this.setClockTime.offWarkEnd),e),s="https://docs.google.com/forms/u/0/d/e/".concat(this.clockUpdate,"/formResponse");$.ajax({type:"POST",url:s,data:a,contentType:"application/json",dataType:"jsonp"}).fail((function(e){200==e.status?(t.isEdit=!1,t.$q.loading.hide(),t.$swal({title:"設定成功",icon:"success",timer:1e3,showConfirmButton:!1})):(t.$q.loading.hide(),t.$swal({title:"設定失敗",icon:"error"}))}))}else this.$swal({icon:"error",title:"設定錯誤",text:"上下班起訖時間未填寫完整"})},setTheClockInData:function(){var e=this;return n()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchClockSetUp();case 2:return t.next=4,e.fetchClockRecord();case 4:e.setClockTime=_.cloneDeep(e.clockTime),e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()}}),mounted:function(){this.setTheClockInData()}},f=p,k=(a("7618"),a("2877")),g=a("f09f"),C=a("a370"),h=a("9564"),b=a("eb85"),T=a("27f9"),y=a("0016"),q=a("7cbe"),W=a("ca78"),w=a("9c40"),x=a("eaac"),v=a("74f7"),E=a("7f67"),B=a("eebe"),S=a.n(B),Q=Object(k["a"])(f,s,i,!1,null,"11d09436",null);t["default"]=Q.exports;S()(Q,"components",{QCard:g["a"],QCardSection:C["a"],QToggle:h["a"],QSeparator:b["a"],QInput:T["a"],QIcon:y["a"],QPopupProxy:q["a"],QTime:W["a"],QBtn:w["a"],QTable:x["a"],QInnerLoading:v["a"]}),S()(Q,"directives",{ClosePopup:E["a"]})}}]);